services:
  vaultwarden:
    image: vaultwarden/server:latest@sha256:84fd8a47f58d79a1ad824c27be0a9492750c0fa5216b35c749863093bfa3c3d7
    container_name: vaultwarden
    restart: always
    ports:
      - "127.0.0.1:{{ VAULTWARDEN_PORT }}:80"
    volumes:
      - "{{ vaultwarden_dir }}/data:/data"
    environment:
      DOMAIN: "https://{{ VAULTWARDEN_DOMAIN }}"
      SIGNUPS_ALLOWED: "{{ VAULTWARDEN_SIGNUPS_ALLOWED }}"
      SMTP_HOST: "{{ SMTP_HOST }}"
      SMTP_PORT: "{{ SMTP_PORT }}"
      SMTP_SECURITY: "starttls"
      SMTP_FROM: "{{ NO_REPLY_MAIL }}"
      SMTP_USERNAME: "{{ NO_REPLY_MAIL }}"
      SMTP_PASSWORD: "{{ SMTP_PASSWORD }}"
